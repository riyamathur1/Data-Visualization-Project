<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bar Charts Visualization</title>
<script src="https://d3js.org/d3.v6.min.js"></script>
<style>
  .bar {
    fill: steelblue;
  }

  .bar:hover {
    fill: orange;
  }

  .tooltip {
    position: absolute;
    text-align: center;
    width: auto;
    height: auto;
    padding: 4px;
    font: 12px sans-serif;
    background: white;
    border: 1px solid #ccc;
    border-radius: 8px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
    box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  }

  .axis-label {
    font-size: 14px;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="raceChart"><h3>Race Distribution</h3></div>
<div id="ageChart"><h3>Age Distribution</h3></div>
<div class="tooltip" id="tooltip"></div>

<script>

var raceData = [
  {race: "White", count: 4261},
  {race: "Black", count: 2226},
  {race: "Hispanic", count: 1536},
  {race: "Asian", count: 166},
  {race: "Native American", count: 127},
  {race: "Other", count: 29}

];

var ageData = [
  {age_range: "0-18", count: 303},
  {age_range: "19-30", count: 2781},
  {age_range: "31-45", count: 3738},
  {age_range: "46-60", count: 1747},
  {age_range: "61-75", count: 446},
  {age_range: "76-100", count: 68}
];


function createBarChart(data, elementId, xValue, yValue) {
  var margin = {top: 20, right: 20, bottom: 50, left: 60},
    width = 700 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

  var svg = d3.select(elementId)
    .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`);

  var x = d3.scaleBand()
    .range([0, width])
    .domain(data.map(d => d[xValue]))
    .padding(0.1);

  var y = d3.scaleLinear()
    .domain([0, d3.max(data, d => d[yValue])])
    .range([height, 0]);

  svg.append("g")
    .attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x))
    .append("text")
    .attr("class", "axis-label")
    .attr("y", 35)
    .attr("x", width / 2)
    .attr("text-anchor", "middle")
    .text("Race");

  svg.append("g")
    .call(d3.axisLeft(y))
    .append("text")
    .attr("class", "axis-label")
    .attr("transform", "rotate(-90)")
    .attr("y", -45)
    .attr("x", -height / 2)
    .attr("text-anchor", "middle")
    .text("Number of Victims");

  var tooltip = d3.select("#tooltip");

  svg.selectAll(".bar")
    .data(data)
    .join("rect")
    .attr("class", "bar")
    .attr("x", d => x(d[xValue]))
    .attr("y", d => y(d[yValue]))
    .attr("width", x.bandwidth())
    .attr("height", d => height - y(d[yValue]))
    .on("mouseover", function(event, d) {
      tooltip
        .style("opacity", 1)
        .html(`${xValue}: ${d[xValue]}<br>${yValue}: ${d[yValue]}`)
        .style("left", `${event.pageX}px`)
        .style("top", `${event.pageY - 28}px`);
    })
    .on("mouseout", function() {
      tooltip.style("opacity", 0);
    });
}

createBarChart(raceData, "#raceChart", "race", "count");
createBarChart(ageData, "#ageChart", "age_range", "count");

</script>
</body>
</html>
